<!DOCTYPE html>
<html>
    <body>
        <input type="file" accept=".sl2">

        <div id="inventory"></div>

        <script type="module">
            import { SaveData } from './src/savedata.js'

            function showFile() {
                let file = document.querySelector('input[type=file]').files[0];
                console.log(file);
                if(!file)
                    return;
                let reader = new FileReader();
                reader.onload = function (event) {
                    let savedata = new SaveData(reader.result);

                    console.log(savedata);

                    let inventory = savedata.characters[0].inventory.filter(x => x.name !== undefined);

                    inventory.sort((a,b) => {
                        return a.name.localeCompare(b.name)
                    });

                    document.getElementById('inventory').innerHTML = "";

                    inventory.forEach(item => {
                        let i = document.createElement("div");
                        let itemString = item.name;
                        i.appendChild(document.createTextNode(itemString));
                        document.getElementById('inventory').appendChild(i);
                    })

                }
                reader.readAsArrayBuffer(file);
            }

            document.querySelector('input').addEventListener('change', showFile);
        </script>
    </body>
</html>